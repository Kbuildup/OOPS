<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>signup</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/style4.css">
</head>

<body>
    <section class="signup-form">
        <div class="title">
            <li><a href="index.html">웁스 OOPS!</a></li>

        </div>
        
        <form action="" id="form" class="form">
            <div class="top-area">
                <h1>회원가입</h1>
            </div>
        
            <div class = "int-area">
                <label for="id">닉네임</label>
                <input type ="text"  id="signUpId" autocomplete="off" placeholder="별명(2~15자)" required>
            </div>
            <div class = "int-area">
                <label for="email">이메일</label>
                <input type ="email" id="signUpEmail" autocomplete="off" placeholder="@ 형식의 이메일을 입력해주세요." required>
                <!-- <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i> 
                <small>Error message</small>-->
            </div>
            <div class = "int-area">
                <label for="pw">비밀번호</label>
                <input type ="password" id="signUpPassword" autocomplete="off" placeholder="영문, 숫자를 포함한 8자 이상의 비밀번호를 입력해주세요." required>
                <!-- <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i> 
                <small>Error message</small>-->
            </div>
            <div class = "int-area">
                <label for="pwt">비밀번호 확인</label>
                <input type ="repassword"  id="signUpPwt" autocomplete="off" placeholder="비밀번호 재입력" required>
            </div>    

            
            <div class="btn-area">
                <button id="signUpBtn" type="submit">회원가입</button>
            </div>
        </form>

        <div class = "caption">
            <a>이미 아이디가 있으신가요? </a>
            <a href="login.html"> 로그인하기</a>
        </div>
    </section>

    <!--  
    <script>
    const form= document.getElementById('form');
    const id = document.getElementById('id');
    const signUpEmail = document.getElementById('signUpEmail');
    const signUpPassword = document.getElementById('signUpPassword');
    const pwt = document.getElementById('pwt');

    form.addEventListener('submit', e => {
        e.preventDefault();
        
        checkInputs();
    });

    function checkInputs() {
        // trim to remove the whitespaces
        const idValue = id.value.trim();
        const signUpEmailValue = signUpEmail.value.trim();
        const signUpPasswordValue = signUpPassword.value.trim();
        const pwtValue = pwt.value.trim();
        
        if(idValue == '') {
            setErrorFor(id, '닉네임을 입력해주세요!');
        } else {
            setSuccessFor(id);
        }
        
        if(signUpEmailValue == "") {
            setErrorFor(signUpEmail,"");
        } else if (!isEmail(emailValue)) {
            setErrorFor(signUpEmail, '올바른 형식의 이메일을 입력해주세요!');
        } else {
            setSuccessFor(signUpEmail);
        }
        
        if(signUpPasswordValue == "") {
            setErrorFor(signUpPassword, '조건에 맞는 비밀번호를 입력해주세요!');
        } else {
            setSuccessFor(signUpPassword);
        }
        
        if(password2Value == '') {
            setErrorFor(pwt, '설정한 비밀번호를 재입력해주세요!');
        } else if(signUpPasswordValue != pwt) {
            setErrorFor(password2, '비밀번호가 일치하지않습니다.');
        } else{
            setSuccessFor(pwt);
        }
    }

    function setErrorFor(input, message) {
        const formControl = input.parentElement;
        const small = formControl.querySelector('small');
        formControl.className = 'form-control error';
        small.innerText = message;
    }

    function setSuccessFor(input) {
        const formControl = input.parentElement;
        formControl.className = 'form-control success';
    }
        
    function isEmail(signUpEmail) {
        return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(signUpEmail);
    }
   </script>
-->
    <!-- <script>
        let id = document.querySelector('#id')
        let signUpPassword = document.querySelector('#signUpPassword')
        let pwt = document.querySelector('#pwt')
        let signUpEmail = document.querySelector('#signUpEmail')
        let signUpBtn = document.querySelector('#signUpBtn')

        signUpBtn.addEventListener('click', () => {
            if(id.value == "") {
                label = id.nextElementSibling
                label.classList.add('warning')
                setTimeout(() => {
                    label.classList.remove('warning')
                }, 1500)
            } else if(signUpPassword.value == "") {
                label = signUpPassword.nextElementSibling
                label.classList.add('warning')
                setTimeout(() => {
                    label.classList.remove('warning')
                }, 1500)
            }
            else if(pwt.value == "") {
                label = pwt.nextElementSibling
                label.classList.add('warning')
                setTimeout(() => {
                    label.classList.remove('warning')
                }, 1500)
            }
            else if(signUpEmail.value == "") {
                label = signInPassword.nextElementSibling
                label.classList.add('warning')
                setTimeout(() => {
                    label.classList.remove('warning')
                }, 1500)
            }
        })
    </script> -->

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
    
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
        apiKey: "AIzaSyCf5PtIZKgEvr0MXdO9ApLO3ORgW342Ddo",
        authDomain: "oops-83965.firebaseapp.com",
        projectId: "oops-83965",
        storageBucket: "oops-83965.appspot.com",
        messagingSenderId: "256807280838",
        appId: "1:256807280838:web:e5fd06beed66de2727f7c7",
        measurementId: "G-7QX51WQPHY"
        };
    
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-auth.js";

        document.getElementById('signUpBtn').addEventListener('click',(event) => { 
            event.preventDefault()
            const text = document.getElementById('signUpId').value
            const email = document.getElementById('signUpEmail').value
            const password = document.getElementById('signUpPassword').value
            const repassword = document.getElementById('signUpPwt').value
            const auth = getAuth();
            createUserWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
                console.log(userCredential)
                location.href='index.html'
                const user = userCredential.user;
                // ...
            })
            .catch((error) => {
                console.log('error!')
                alert('회원가입 요건에 충족하지 않습니다!');
                const errorCode = error.code;
                const errorMessage = error.message;
                // ..
            });
        })



    </script>
</body>

</html>